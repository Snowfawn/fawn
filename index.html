#!/bin/bash

# zsh 쉘 검사
if [[ "$SHELL" != *"zsh"* ]]; then
    echo "Error: zsh 쉘에서만 실행 가능합니다."
    echo "현재 쉘: $SHELL"
    exit 1
fi

# 필요한 디렉토리 생성
FAWN_DIR="$HOME/.snowfawn/fawn"
mkdir -p "$HOME/.snowfawn"

# git clone 수행
if [ ! -d "$FAWN_DIR" ]; then
    git clone https://github.com/Snowfawn/fawn.git "$FAWN_DIR"
else
    echo "이미 fawn이 설치되어 있습니다."
    exit 1
fi

# 심볼릭 링크 생성
sudo ln -s "$FAWN_DIR/fawn.sh" /usr/local/bin/fawn

# 실행 권한 부여
chmod +x "$FAWN_DIR/fawn.sh"

echo "설정이 완료되었습니다. 이제 'fawn' 명령어로 스크립트를 실행할 수 있습니다."
